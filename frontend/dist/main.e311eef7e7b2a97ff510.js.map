{"version":3,"file":"main.e311eef7e7b2a97ff510.js","mappings":"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","sources":["webpack://zkkyc-frontend/webpack/runtime/chunk loaded","webpack://zkkyc-frontend/./src/context/Web3Context.js","webpack://zkkyc-frontend/./src/services/zkProofService.js","webpack://zkkyc-frontend/./src/services/identityManager.js","webpack://zkkyc-frontend/./src/context/ZKKYCContext.js","webpack://zkkyc-frontend/./src/components/ZKKYCWallet.js","webpack://zkkyc-frontend/./src/components/WalletConnection.js","webpack://zkkyc-frontend/./src/components/NetworkStatus.js","webpack://zkkyc-frontend/./src/App.js","webpack://zkkyc-frontend/./src/index.js","webpack://zkkyc-frontend/webpack/bootstrap","webpack://zkkyc-frontend/webpack/runtime/amd options","webpack://zkkyc-frontend/webpack/runtime/compat get default export","webpack://zkkyc-frontend/webpack/runtime/define property getters","webpack://zkkyc-frontend/webpack/runtime/global","webpack://zkkyc-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://zkkyc-frontend/webpack/runtime/node module decorator","webpack://zkkyc-frontend/webpack/runtime/jsonp chunk loading","webpack://zkkyc-frontend/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","import React, { createContext, useState, useEffect } from 'react';\nimport { ethers } from 'ethers';\n\nexport const Web3Context = createContext();\n\nexport const Web3Provider = ({ children }) => {\n  const [account, setAccount] = useState(null);\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [network, setNetwork] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isCorrectNetwork, setIsCorrectNetwork] = useState(false);\n  \n  const SEPOLIA_CHAIN_ID = 11155111;\n  const SEPOLIA_CHAIN_HEX = '0xaa36a7';\n\n  useEffect(() => {\n    checkWalletConnection();\n    setupEventListeners();\n    return () => {\n      removeEventListeners();\n    };\n  }, []);\n  \n  const setupEventListeners = () => {\n    if (window.ethereum) {\n      window.ethereum.on('accountsChanged', handleAccountsChanged);\n      window.ethereum.on('chainChanged', handleChainChanged);\n    }\n  };\n  \n  const removeEventListeners = () => {\n    if (window.ethereum) {\n      window.ethereum.removeListener('accountsChanged', handleAccountsChanged);\n      window.ethereum.removeListener('chainChanged', handleChainChanged);\n    }\n  };\n  \n  const handleAccountsChanged = (accounts) => {\n    if (accounts.length === 0) {\n      disconnectWallet();\n    } else {\n      setAccount(accounts[0]);\n      if (provider) {\n        setSigner(provider.getSigner());\n      }\n    }\n  };\n  \n  const handleChainChanged = (chainId) => {\n    // Convert hex to decimal and check if it's Sepolia\n    const chainIdDecimal = parseInt(chainId, 16);\n    setIsCorrectNetwork(chainIdDecimal === SEPOLIA_CHAIN_ID);\n    \n    // Reload the page to reset the app state\n    window.location.reload();\n  };\n  \n  const checkNetworkCompatibility = (networkInfo) => {\n    const isCorrect = networkInfo.chainId === SEPOLIA_CHAIN_ID;\n    setIsCorrectNetwork(isCorrect);\n    return isCorrect;\n  };\n\n  const checkWalletConnection = async () => {\n    try {\n      if (window.ethereum) {\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        setProvider(provider);\n        \n        const accounts = await provider.listAccounts();\n        if (accounts.length > 0) {\n          setAccount(accounts[0]);\n          setSigner(provider.getSigner());\n          \n          const network = await provider.getNetwork();\n          setNetwork(network);\n          checkNetworkCompatibility(network);\n        }\n      }\n    } catch (error) {\n      console.error('Error checking wallet connection:', error);\n      setError('Failed to connect to wallet');\n    }\n  };\n\n  const connectWallet = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      if (!window.ethereum) {\n        throw new Error('MetaMask not installed');\n      }\n      \n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      setProvider(provider);\n      \n      await window.ethereum.request({ method: 'eth_requestAccounts' });\n      \n      const accounts = await provider.listAccounts();\n      if (accounts.length > 0) {\n        setAccount(accounts[0]);\n        setSigner(provider.getSigner());\n        \n        const network = await provider.getNetwork();\n        setNetwork(network);\n        checkNetworkCompatibility(network);\n      }\n    } catch (error) {\n      console.error('Error connecting wallet:', error);\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const disconnectWallet = () => {\n    setAccount(null);\n    setProvider(null);\n    setSigner(null);\n    setNetwork(null);\n    setError(null);\n    setIsCorrectNetwork(false);\n  };\n  \n  const switchAccount = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      if (!window.ethereum) {\n        throw new Error('MetaMask not installed');\n      }\n      \n      // Request account access to show account selector\n      await window.ethereum.request({ \n        method: 'wallet_requestPermissions',\n        params: [{ eth_accounts: {} }] \n      });\n      \n      // Reconnect with the new account\n      await connectWallet();\n    } catch (error) {\n      console.error('Error switching account:', error);\n      setError('Failed to switch account');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const switchToSepolia = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      if (!window.ethereum) {\n        throw new Error('MetaMask not installed');\n      }\n      \n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{ chainId: SEPOLIA_CHAIN_HEX }],\n      });\n      \n      // Wait a bit for the network to switch\n      setTimeout(() => {\n        checkWalletConnection();\n      }, 1000);\n      \n    } catch (error) {\n      // If the network doesn't exist, add it\n      if (error.code === 4902) {\n        await addSepoliaNetwork();\n      } else {\n        console.error('Error switching network:', error);\n        setError('Failed to switch to Sepolia network');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const addSepoliaNetwork = async () => {\n    try {\n      await window.ethereum.request({\n        method: 'wallet_addEthereumChain',\n        params: [{\n          chainId: SEPOLIA_CHAIN_HEX,\n          chainName: 'Sepolia Test Network',\n          nativeCurrency: {\n            name: 'SepoliaETH',\n            symbol: 'ETH',\n            decimals: 18\n          },\n          rpcUrls: ['https://sepolia.infura.io/v3/'],\n          blockExplorerUrls: ['https://sepolia.etherscan.io/']\n        }]\n      });\n    } catch (error) {\n      console.error('Error adding Sepolia network:', error);\n      setError('Failed to add Sepolia network');\n    }\n  };\n\n  const value = {\n    account,\n    provider,\n    signer,\n    network,\n    loading,\n    error,\n    isCorrectNetwork,\n    connectWallet,\n    disconnectWallet,\n    switchAccount,\n    switchToSepolia,\n    addSepoliaNetwork,\n    isConnected: !!account,\n    SEPOLIA_CHAIN_ID\n  };\n\n  return (\n    <Web3Context.Provider value={value}>\n      {children}\n    </Web3Context.Provider>\n  );\n};","import { ethers } from 'ethers';\n\n// Use proof server for real ZK proof generation\nconst PROOF_SERVER_URL = 'http://localhost:3001';\n\nexport class ZKProofService {\n  constructor() {\n    this.wasmPath = '/circuits/zkkyc.wasm';\n    this.zkeyPath = '/circuits/zkkyc_0001.zkey';\n    this.verificationKeyPath = '/circuits/verification_key.json';\n    this.merkleTreeHeight = 20;\n  }\n\n  /**\n   * Generate ZK proof for KYC age verification\n   * @param {Object} inputs - The proof inputs\n   * @returns {Promise<Object>} - The generated proof and public signals\n   */\n  async generateProof(inputs) {\n    try {\n      console.log('Generating ZK proof with inputs:', inputs);\n      \n      // Try to use proof server for real ZK proof generation\n      try {\n        const response = await fetch(`${PROOF_SERVER_URL}/generate-proof`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(inputs)\n        });\n        \n        if (response.ok) {\n          const result = await response.json();\n          if (result.success) {\n            console.log('✅ Real ZK proof generated successfully!');\n            return {\n              proof: result.proof,\n              publicSignals: result.publicSignals\n            };\n          } else {\n            console.warn('Proof server returned error:', result.error);\n          }\n        } else {\n          console.warn('Proof server request failed:', response.status);\n        }\n      } catch (serverError) {\n        console.warn('Proof server not available:', serverError.message);\n      }\n      \n      // Fallback to mock proof\n      console.log('🔄 Falling back to mock proof generation');\n      return this.generateMockProof(inputs);\n      \n    } catch (error) {\n      console.error('Error generating ZK proof:', error);\n      console.log('🔄 Falling back to mock proof due to error');\n      return this.generateMockProof(inputs);\n    }\n  }\n\n  /**\n   * Verify ZK proof locally before sending to contract\n   * @param {Object} proof - The proof object\n   * @param {Array} publicSignals - The public signals\n   * @returns {Promise<boolean>} - Whether the proof is valid\n   */\n  async verifyProof(proof, publicSignals) {\n    try {\n      // Try to use proof server for verification\n      try {\n        const response = await fetch(`${PROOF_SERVER_URL}/verify-proof`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({ proof, publicSignals })\n        });\n        \n        if (response.ok) {\n          const result = await response.json();\n          if (result.success) {\n            console.log('✅ Proof verified on server:', result.isValid);\n            return result.isValid;\n          }\n        }\n      } catch (serverError) {\n        console.warn('Proof server verification failed:', serverError.message);\n      }\n      \n      // Fallback - cannot verify without server\n      console.warn('Cannot verify proof without server');\n      return false;\n    } catch (error) {\n      console.error('Error verifying proof:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Prepare inputs for the circuit\n   * @param {Object} inputs - Raw inputs\n   * @returns {Object} - Formatted circuit inputs\n   */\n  prepareCircuitInputs(inputs) {\n    const {\n      nullifier,\n      secret,\n      did,\n      birthDate,\n      currentTime,\n      minimumAge,\n      merkleRoot,\n      nullifierHash,\n      merkleProof\n    } = inputs;\n\n    // Convert birth date to timestamp if it's a string\n    const birthTimestamp = typeof birthDate === 'string' \n      ? Math.floor(new Date(birthDate).getTime() / 1000)\n      : birthDate;\n\n    // Prepare merkle path elements and indices\n    const pathElements = new Array(this.merkleTreeHeight).fill('0');\n    const pathIndices = new Array(this.merkleTreeHeight).fill('0');\n    \n    // If merkleProof is provided, use it\n    if (merkleProof && merkleProof.pathElements) {\n      for (let i = 0; i < Math.min(merkleProof.pathElements.length, this.merkleTreeHeight); i++) {\n        pathElements[i] = merkleProof.pathElements[i];\n        pathIndices[i] = merkleProof.pathIndices[i];\n      }\n    }\n\n    return {\n      // Private inputs\n      nullifier: this.toBigInt(nullifier),\n      secret: this.toBigInt(secret),\n      did: this.toBigInt(did),\n      pathElements: pathElements.map(x => this.toBigInt(x)),\n      pathIndices: pathIndices.map(x => this.toBigInt(x)),\n      birthDate: birthTimestamp.toString(),\n      \n      // Public inputs\n      root: this.toBigInt(merkleRoot),\n      nullifierHash: this.toBigInt(nullifierHash),\n      currentTime: currentTime.toString(),\n      minimumAge: minimumAge.toString()\n    };\n  }\n\n  /**\n   * Format proof for smart contract\n   * @param {Object} proof - Raw proof from snarkjs\n   * @returns {Object} - Formatted proof\n   */\n  formatProofForContract(proof) {\n    return {\n      pi_a: [proof.pi_a[0], proof.pi_a[1]],\n      pi_b: [[proof.pi_b[0][1], proof.pi_b[0][0]], [proof.pi_b[1][1], proof.pi_b[1][0]]],\n      pi_c: [proof.pi_c[0], proof.pi_c[1]]\n    };\n  }\n\n  /**\n   * Convert value to BigInt for circuit\n   * @param {*} value - Value to convert\n   * @returns {string} - BigInt string\n   */\n  toBigInt(value) {\n    if (typeof value === 'string') {\n      if (value.startsWith('0x')) {\n        return BigInt(value).toString();\n      }\n      return value;\n    }\n    if (typeof value === 'number') {\n      return BigInt(value).toString();\n    }\n    if (typeof value === 'bigint') {\n      return value.toString();\n    }\n    return BigInt(value || 0).toString();\n  }\n\n  /**\n   * Generate identity commitment\n   * @param {string} nullifier - The nullifier\n   * @param {string} secret - The secret\n   * @param {string} did - The DID\n   * @returns {Promise<string>} - The commitment hash\n   */\n  async generateCommitment(nullifier, secret, did) {\n    try {\n      // Use Poseidon hash to generate commitment\n      const commitment = ethers.utils.keccak256(\n        ethers.utils.defaultAbiCoder.encode(\n          ['uint256', 'uint256', 'uint256'],\n          [this.toBigInt(nullifier), this.toBigInt(secret), this.toBigInt(did)]\n        )\n      );\n      \n      return commitment;\n    } catch (error) {\n      console.error('Error generating commitment:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Generate nullifier hash\n   * @param {string} nullifier - The nullifier\n   * @param {number} currentTime - Current timestamp\n   * @returns {Promise<string>} - The nullifier hash\n   */\n  async generateNullifierHash(nullifier, currentTime) {\n    try {\n      const nullifierHash = ethers.utils.keccak256(\n        ethers.utils.defaultAbiCoder.encode(\n          ['uint256', 'uint256'],\n          [this.toBigInt(nullifier), currentTime]\n        )\n      );\n      \n      return nullifierHash;\n    } catch (error) {\n      console.error('Error generating nullifier hash:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Create a simple merkle tree for testing\n   * @param {Array} leaves - Array of leaf values\n   * @returns {Object} - Merkle tree with root and proof methods\n   */\n  generateMockProof(inputs) {\n    console.log('Generating mock ZK proof');\n    \n    const mockProof = {\n      proof: {\n        pi_a: [\n          '0x1853034987712246426929201391724714898295156213405955369853072608605563140365',\n          '0x7198183041722314299882689081228904533251895217297057633352725320322492333268'\n        ],\n        pi_b: [\n          [\n            '0x13531277862656208833438534707900630797772244346889389580205754526157702849885',\n            '0x655631939281545332504919736953321663519114267948235723191789164934401101892'\n          ],\n          [\n            '0x745417327382481498932071710738369054466478084158769501335074926048131827462',\n            '0x18244135873856574020512890818854407479317907858514021408878772277422050584300'\n          ]\n        ],\n        pi_c: [\n          '0x11559732032986387107991004021392285783925812861821192530917403151452391805634',\n          '0x10857046999023057135944570762232829481370756359578518086990519993285655852781'\n        ]\n      },\n      publicSignals: [\n        inputs.merkleRoot,\n        inputs.nullifierHash,\n        inputs.currentTime.toString(),\n        inputs.minimumAge.toString()\n      ]\n    };\n    \n    return mockProof;\n  }\n  \n  createMerkleTree(leaves) {\n    // Simple implementation for demo - in production use a proper merkle tree library\n    const tree = {\n      leaves: leaves,\n      root: ethers.utils.keccak256(ethers.utils.defaultAbiCoder.encode(['bytes32[]'], [leaves])),\n      getProof: (leafIndex) => {\n        // Return empty proof for demo\n        return {\n          pathElements: new Array(this.merkleTreeHeight).fill('0'),\n          pathIndices: new Array(this.merkleTreeHeight).fill('0')\n        };\n      }\n    };\n    \n    return tree;\n  }\n}\n\nexport default ZKProofService;","import { ethers } from 'ethers';\nimport ZKProofService from './zkProofService';\n\nexport class IdentityManager {\n  constructor() {\n    this.zkProofService = new ZKProofService();\n  }\n\n  /**\n   * Create a new identity\n   * @param {string} did - Decentralized identifier\n   * @returns {Promise<Object>} - The created identity\n   */\n  async createIdentity(did) {\n    try {\n      // Generate random values for the identity\n      const nullifier = this.generateRandomBigInt();\n      const secret = this.generateRandomBigInt();\n      const didBigInt = this.stringToBigInt(did);\n\n      // Generate commitment\n      const commitment = await this.zkProofService.generateCommitment(nullifier, secret, didBigInt);\n\n      const identity = {\n        did,\n        nullifier: nullifier.toString(),\n        secret: secret.toString(),\n        didBigInt: didBigInt.toString(),\n        commitment,\n        createdAt: Date.now()\n      };\n\n      console.log('Created identity:', identity);\n      return identity;\n    } catch (error) {\n      console.error('Error creating identity:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Generate proof inputs for ZK circuit\n   * @param {Object} params - Parameters for proof generation\n   * @returns {Object} - Formatted proof inputs\n   */\n  async generateProofInputs(params) {\n    const {\n      identity,\n      birthDate,\n      currentTime,\n      minimumAge,\n      merkleTree\n    } = params;\n\n    try {\n      // Generate nullifier hash\n      const nullifierHash = await this.zkProofService.generateNullifierHash(\n        identity.nullifier,\n        currentTime\n      );\n\n      // Get merkle proof (simplified for demo)\n      const merkleProof = merkleTree ? merkleTree.getProof(0) : null;\n\n      const proofInputs = {\n        // Private inputs\n        nullifier: identity.nullifier,\n        secret: identity.secret,\n        did: identity.didBigInt,\n        birthDate: birthDate,\n        \n        // Public inputs\n        currentTime: currentTime,\n        minimumAge: minimumAge,\n        merkleRoot: merkleTree ? merkleTree.root : ethers.utils.keccak256(ethers.utils.toUtf8Bytes('default_root')),\n        nullifierHash: nullifierHash,\n        \n        // Merkle proof\n        merkleProof: merkleProof\n      };\n\n      console.log('Generated proof inputs:', proofInputs);\n      return proofInputs;\n    } catch (error) {\n      console.error('Error generating proof inputs:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Generate a ZK proof for age verification\n   * @param {Object} proofInputs - The proof inputs\n   * @returns {Promise<Object>} - The generated proof\n   */\n  async generateZKProof(proofInputs) {\n    try {\n      const result = await this.zkProofService.generateProof(proofInputs);\n      \n      // Verify the proof locally before returning\n      const isValid = await this.zkProofService.verifyProof(result.proof, result.publicSignals);\n      \n      if (!isValid) {\n        throw new Error('Generated proof is invalid');\n      }\n\n      return result;\n    } catch (error) {\n      console.error('Error generating ZK proof:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Verify a ZK proof locally\n   * @param {Object} proof - The proof object\n   * @param {Array} publicSignals - The public signals\n   * @returns {Promise<boolean>} - Whether the proof is valid\n   */\n  async verifyProof(proof, publicSignals) {\n    return await this.zkProofService.verifyProof(proof, publicSignals);\n  }\n\n  /**\n   * Generate a random BigInt\n   * @returns {BigInt} - Random BigInt\n   */\n  generateRandomBigInt() {\n    const bytes = ethers.utils.randomBytes(32);\n    return BigInt(ethers.utils.hexlify(bytes));\n  }\n\n  /**\n   * Convert string to BigInt\n   * @param {string} str - String to convert\n   * @returns {BigInt} - BigInt representation\n   */\n  stringToBigInt(str) {\n    const bytes = ethers.utils.toUtf8Bytes(str);\n    const hash = ethers.utils.keccak256(bytes);\n    return BigInt(hash);\n  }\n\n  /**\n   * Create a simple merkle tree for testing\n   * @param {Array} commitments - Array of commitment values\n   * @returns {Object} - Merkle tree object\n   */\n  createMerkleTree(commitments) {\n    return this.zkProofService.createMerkleTree(commitments);\n  }\n\n  /**\n   * Load identity from storage\n   * @param {string} account - Ethereum account address\n   * @returns {Object|null} - The loaded identity or null\n   */\n  loadIdentity(account) {\n    try {\n      const stored = localStorage.getItem(`zkkyc_identity_${account}`);\n      if (stored) {\n        return JSON.parse(stored);\n      }\n      return null;\n    } catch (error) {\n      console.error('Error loading identity:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Save identity to storage\n   * @param {string} account - Ethereum account address\n   * @param {Object} identity - The identity to save\n   */\n  saveIdentity(account, identity) {\n    try {\n      localStorage.setItem(`zkkyc_identity_${account}`, JSON.stringify(identity));\n    } catch (error) {\n      console.error('Error saving identity:', error);\n      throw error;\n    }\n  }\n}\n\nexport default IdentityManager;","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { ethers } from 'ethers';\nimport { Web3Context } from './Web3Context';\nimport contractAddresses from '../config/contracts.json';\nimport ZKProofService from '../services/zkProofService';\nimport IdentityManager from '../services/identityManager';\n\n// Contract ABIs (in production, these should be imported from generated files)\nconst KYCRegistryABI = [\n  \"function depositCommitment(bytes32 commitment) external\",\n  \"function commitments(bytes32) external view returns (bool)\",\n  \"function isSpent(bytes32 nullifierHash) external view returns (bool)\",\n  \"function getLastRoot() external view returns (bytes32)\",\n  \"function isKnownRoot(bytes32 root) external view returns (bool)\",\n  \"event CommitmentAdded(bytes32 indexed commitment, uint32 leafIndex, bytes32 root)\"\n];\n\nconst AccessControllerABI = [\n  \"function configureService(string calldata serviceName, bool enabled, uint256 minimumAge, uint256 validityPeriod) external\",\n  \"function verifyKYCAndGrantAccess(tuple(uint[2] pA, uint[2][2] pB, uint[2] pC, uint[4] publicSignals) proofData, string calldata serviceName) external\",\n  \"function hasAccess(address user, string calldata serviceName) external view returns (bool)\",\n  \"function getServiceConfig(string calldata serviceName) external view returns (bool enabled, uint256 minimumAge, uint256 validityPeriod)\",\n  \"function revokeAccess(address user, string calldata serviceName) external\",\n  \"event AccessGranted(address indexed user, string indexed service, bytes32 nullifierHash)\",\n  \"event AccessRevoked(address indexed user, string indexed service)\"\n];\n\nexport const ZKKYCContext = createContext();\n\nexport const ZKKYCProvider = ({ children }) => {\n  const { provider, signer, account } = useContext(Web3Context);\n  \n  const [userIdentity, setUserIdentity] = useState(null);\n  const [proofGenerator, setProofGenerator] = useState(null);\n  const [identityManager, setIdentityManager] = useState(null);\n  const [kycRegistry, setKycRegistry] = useState(null);\n  const [accessController, setAccessController] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (provider && contractAddresses.contracts) {\n      initializeContracts();\n      initializeUtils();\n    }\n  }, [provider, contractAddresses]);\n\n  const initializeContracts = async () => {\n    try {\n      setLoading(true);\n      \n      // Initialize KYC Registry\n      const kycRegistryContract = new ethers.Contract(\n        contractAddresses.contracts.kycRegistry,\n        KYCRegistryABI,\n        provider\n      );\n      setKycRegistry(kycRegistryContract);\n      \n      // Initialize Access Controller\n      const accessControllerContract = new ethers.Contract(\n        contractAddresses.contracts.accessController,\n        AccessControllerABI,\n        provider\n      );\n      setAccessController(accessControllerContract);\n      \n      console.log('Contracts initialized successfully');\n    } catch (error) {\n      console.error('Error initializing contracts:', error);\n      setError('Failed to initialize contracts');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const initializeUtils = () => {\n    try {\n      // Initialize real ZK proof services\n      const zkProofService = new ZKProofService();\n      const identityManager = new IdentityManager();\n      \n      // Set up proof generator with real ZK proof generation\n      const proofGen = {\n        generateProof: async (inputs) => {\n          try {\n            const result = await zkProofService.generateProof(inputs);\n            return result;\n          } catch (error) {\n            console.error('ZK proof generation failed:', error);\n            // Fallback to mock for development\n            console.log('Falling back to mock proof generation');\n            return {\n              proof: {\n                pi_a: [\n                  '0x1853034987712246426929201391724714898295156213405955369853072608605563140365',\n                  '0x7198183041722314299882689081228904533251895217297057633352725320322492333268'\n                ],\n                pi_b: [\n                  [\n                    '0x13531277862656208833438534707900630797772244346889389580205754526157702849885',\n                    '0x655631939281545332504919736953321663519114267948235723191789164934401101892'\n                  ],\n                  [\n                    '0x745417327382481498932071710738369054466478084158769501335074926048131827462',\n                    '0x18244135873856574020512890818854407479317907858514021408878772277422050584300'\n                  ]\n                ],\n                pi_c: [\n                  '0x11559732032986387107991004021392285783925812861821192530917403151452391805634',\n                  '0x10857046999023057135944570762232829481370756359578518086990519993285655852781'\n                ]\n              },\n              publicSignals: [\n                inputs.merkleRoot,\n                inputs.nullifierHash,\n                inputs.currentTime.toString(),\n                inputs.minimumAge.toString()\n              ]\n            };\n          }\n        },\n        verifyProof: async (proof, publicSignals) => {\n          try {\n            return await zkProofService.verifyProof(proof, publicSignals);\n          } catch (error) {\n            console.error('Proof verification failed:', error);\n            return false;\n          }\n        }\n      };\n      \n      const identityMgr = {\n        createIdentity: async (did) => {\n          try {\n            return await identityManager.createIdentity(did);\n          } catch (error) {\n            console.error('Identity creation failed:', error);\n            // Fallback to mock\n            const randomCommitment = ethers.utils.keccak256(ethers.utils.toUtf8Bytes(did + Date.now()));\n            return {\n              did,\n              commitment: randomCommitment,\n              secret: ethers.utils.hexlify(ethers.utils.randomBytes(32)),\n              nullifier: ethers.utils.keccak256(ethers.utils.toUtf8Bytes('nullifier' + did))\n            };\n          }\n        },\n        generateProofInputs: async (params) => {\n          try {\n            return await identityManager.generateProofInputs(params);\n          } catch (error) {\n            console.error('Proof input generation failed:', error);\n            // Fallback to mock\n            const merkleRoot = ethers.utils.keccak256(ethers.utils.toUtf8Bytes('mock_root_' + params.identity.did));\n            const nullifierHash = ethers.utils.keccak256(ethers.utils.toUtf8Bytes('nullifier_' + params.identity.did + '_' + params.currentTime));\n            \n            return {\n              identity: params.identity,\n              currentTime: params.currentTime,\n              birthDate: params.birthDate,\n              minimumAge: params.minimumAge,\n              merkleRoot,\n              nullifierHash\n            };\n          }\n        },\n        loadIdentity: (account) => {\n          return identityManager.loadIdentity(account);\n        },\n        saveIdentity: (account, identity) => {\n          return identityManager.saveIdentity(account, identity);\n        },\n        createMerkleTree: (commitments) => {\n          return identityManager.createMerkleTree(commitments);\n        }\n      };\n      \n      setProofGenerator(proofGen);\n      setIdentityManager(identityMgr);\n      \n      console.log('ZK proof services initialized successfully');\n    } catch (error) {\n      console.error('Error initializing ZK services:', error);\n      setError('Failed to initialize ZK services');\n    }\n  };\n\n  const createIdentity = async (did) => {\n    if (!identityManager) {\n      throw new Error('Identity manager not initialized');\n    }\n    \n    try {\n      setLoading(true);\n      const identity = await identityManager.createIdentity(did);\n      setUserIdentity(identity);\n      \n      // Store in localStorage (in production, use secure storage)\n      if (account) {\n        identityManager.saveIdentity(account, identity);\n      }\n      \n      return identity;\n    } catch (error) {\n      console.error('Error creating identity:', error);\n      setError('Failed to create identity');\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadIdentity = async () => {\n    if (!account || !identityManager) return null;\n    \n    try {\n      const identity = identityManager.loadIdentity(account);\n      if (identity) {\n        setUserIdentity(identity);\n        return identity;\n      }\n      return null;\n    } catch (error) {\n      console.error('Error loading identity:', error);\n      return null;\n    }\n  };\n\n  const registerCommitment = async (commitment) => {\n    if (!kycRegistry || !signer) {\n      throw new Error('Contracts not initialized or wallet not connected');\n    }\n    \n    try {\n      setLoading(true);\n      const tx = await kycRegistry.connect(signer).depositCommitment(commitment);\n      await tx.wait();\n      \n      console.log('Commitment registered:', tx.hash);\n      return tx;\n    } catch (error) {\n      console.error('Error registering commitment:', error);\n      setError('Failed to register commitment');\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const generateProof = async (inputs) => {\n    if (!proofGenerator) {\n      throw new Error('Proof generator not initialized');\n    }\n    \n    try {\n      setLoading(true);\n      const result = await proofGenerator.generateProof(inputs);\n      \n      // Try to verify the proof locally\n      if (proofGenerator.verifyProof) {\n        const isValid = await proofGenerator.verifyProof(result.proof, result.publicSignals);\n        console.log('Local proof verification:', isValid);\n      }\n      \n      return result;\n    } catch (error) {\n      console.error('Error generating proof:', error);\n      setError('Failed to generate proof');\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const verifyAndGrantAccess = async (proofData, serviceName) => {\n    if (!accessController || !signer) {\n      throw new Error('Access controller not initialized or wallet not connected');\n    }\n    \n    try {\n      setLoading(true);\n      \n      // First check if service is configured\n      const serviceConfig = await accessController.getServiceConfig(serviceName);\n      if (!serviceConfig.enabled) {\n        throw new Error(`Service '${serviceName}' is not enabled or configured`);\n      }\n      \n      console.log('Service config:', serviceConfig);\n      console.log('Proof data being submitted:', proofData);\n      \n      const tx = await accessController.connect(signer).verifyKYCAndGrantAccess(proofData, serviceName);\n      await tx.wait();\n      \n      console.log('Access granted:', tx.hash);\n      return tx;\n    } catch (error) {\n      console.error('Error verifying KYC:', error);\n      \n      // More detailed error handling\n      if (error.message.includes('Service not enabled')) {\n        throw new Error('The voting service is not configured on this contract. Please contact the administrator.');\n      } else if (error.message.includes('Invalid proof')) {\n        throw new Error('The zero-knowledge proof is invalid. This is expected with mock data.');\n      } else if (error.message.includes('Nullifier already used')) {\n        throw new Error('This identity has already been used for voting.');\n      } else if (error.message.includes('Invalid Merkle root')) {\n        throw new Error('The identity commitment is not registered in the system.');\n      } else if (error.message.includes('Age requirement not met')) {\n        throw new Error('Age requirement not met for this service.');\n      }\n      \n      setError('Failed to verify KYC');\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const checkAccess = async (user, serviceName) => {\n    if (!accessController) {\n      throw new Error('Access controller not initialized');\n    }\n    \n    try {\n      const hasAccess = await accessController.hasAccess(user, serviceName);\n      return hasAccess;\n    } catch (error) {\n      console.error('Error checking access:', error);\n      return false;\n    }\n  };\n\n  const getServiceConfig = async (serviceName) => {\n    if (!accessController) {\n      throw new Error('Access controller not initialized');\n    }\n    \n    try {\n      const config = await accessController.getServiceConfig(serviceName);\n      return {\n        enabled: config.enabled,\n        minimumAge: config.minimumAge.toNumber(),\n        validityPeriod: config.validityPeriod.toNumber()\n      };\n    } catch (error) {\n      console.error('Error getting service config:', error);\n      return null;\n    }\n  };\n\n  const clearError = () => {\n    setError(null);\n  };\n\n  const value = {\n    // State\n    userIdentity,\n    setUserIdentity,\n    proofGenerator,\n    identityManager,\n    kycRegistry,\n    accessController,\n    loading,\n    error,\n    \n    // Functions\n    createIdentity,\n    loadIdentity,\n    registerCommitment,\n    generateProof,\n    verifyAndGrantAccess,\n    checkAccess,\n    getServiceConfig,\n    clearError,\n    \n    // Additional utilities\n    initializeContracts,\n    initializeUtils,\n    \n    // Utilities\n    isInitialized: !!(proofGenerator && identityManager && kycRegistry && accessController)\n  };\n\n  return (\n    <ZKKYCContext.Provider value={value}>\n      {children}\n    </ZKKYCContext.Provider>\n  );\n};","import React, { useState, useEffect, useContext } from 'react';\nimport { ethers } from 'ethers';\nimport { Web3Context } from '../context/Web3Context';\nimport { ZKKYCContext } from '../context/ZKKYCContext';\n\nfunction ZKKYCWallet() {\n  const { account, provider, signer } = useContext(Web3Context);\n  const { \n    userIdentity, \n    setUserIdentity, \n    proofGenerator, \n    identityManager,\n    kycRegistry,\n    accessController \n  } = useContext(ZKKYCContext);\n  \n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [errorType, setErrorType] = useState(null);\n  const [birthDate, setBirthDate] = useState('');\n  const [proofStatus, setProofStatus] = useState(null);\n  const [age, setAge] = useState(null);\n  const [validationErrors, setValidationErrors] = useState({});\n  const [touched, setTouched] = useState({});\n  const [hasVotingAccess, setHasVotingAccess] = useState(false);\n  const [retryCount, setRetryCount] = useState(0);\n  const [maxRetries] = useState(3);\n\n  useEffect(() => {\n    if (account && provider) {\n      loadUserIdentity();\n      checkVotingAccess();\n    }\n  }, [account, provider]);\n\n  useEffect(() => {\n    if (birthDate) {\n      calculateAge();\n    }\n  }, [birthDate]);\n\n  const calculateAge = () => {\n    try {\n      if (!birthDate) {\n        setAge(null);\n        return;\n      }\n      \n      const today = new Date();\n      const birth = new Date(birthDate);\n      \n      if (isNaN(birth.getTime())) {\n        setAge(null);\n        validateField('birthDate', birthDate);\n        return;\n      }\n      \n      let calculatedAge = today.getFullYear() - birth.getFullYear();\n      const monthDiff = today.getMonth() - birth.getMonth();\n      \n      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {\n        calculatedAge--;\n      }\n      \n      setAge(calculatedAge);\n      \n      // Validate both birth date and calculated age\n      validateField('birthDate', birthDate);\n      validateField('age', calculatedAge);\n      \n    } catch (error) {\n      console.error('Error calculating age:', error);\n      setAge(null);\n      validateField('birthDate', birthDate);\n    }\n  };\n\n  const checkVotingAccess = async () => {\n    if (!account) return;\n    \n    try {\n      const hasAccess = await accessController.hasAccess(account, 'voting');\n      setHasVotingAccess(hasAccess);\n    } catch (error) {\n      console.error('Error checking voting access:', error);\n    }\n  };\n\n  const loadUserIdentity = async () => {\n    try {\n      // Load identity using the identity manager\n      if (identityManager && identityManager.loadIdentity) {\n        const identity = identityManager.loadIdentity(account);\n        if (identity) {\n          setUserIdentity(identity);\n          \n          // Check if commitment is in the registry\n          const isCommitted = await kycRegistry.commitments(identity.commitment);\n          if (!isCommitted) {\n            setError('Identity commitment not found in registry. Please register first.');\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error loading user identity:', error);\n    }\n  };\n\n  const validateBirthDate = (date) => {\n    if (!date) {\n      return 'Birth date is required';\n    }\n    \n    const birthDate = new Date(date);\n    const today = new Date();\n    const minDate = new Date();\n    minDate.setFullYear(today.getFullYear() - 120);\n    \n    if (isNaN(birthDate.getTime())) {\n      return 'Please enter a valid date';\n    }\n    \n    if (birthDate > today) {\n      return 'Birth date cannot be in the future';\n    }\n    \n    if (birthDate < minDate) {\n      return 'Birth date cannot be more than 120 years ago';\n    }\n    \n    return null;\n  };\n\n  const validateAge = (calculatedAge) => {\n    if (calculatedAge === null) {\n      return 'Please enter a valid birth date';\n    }\n    \n    if (calculatedAge < 18) {\n      return 'You must be at least 18 years old to vote';\n    }\n    \n    if (calculatedAge > 120) {\n      return 'Please enter a valid age';\n    }\n    \n    return null;\n  };\n\n  const validateInputs = () => {\n    const errors = {};\n    \n    const birthDateError = validateBirthDate(birthDate);\n    if (birthDateError) {\n      errors.birthDate = birthDateError;\n    }\n    \n    const ageError = validateAge(age);\n    if (ageError) {\n      errors.age = ageError;\n    }\n    \n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const validateField = (fieldName, value) => {\n    let error = null;\n    \n    switch (fieldName) {\n      case 'birthDate':\n        error = validateBirthDate(value);\n        break;\n      case 'age':\n        error = validateAge(value);\n        break;\n      default:\n        break;\n    }\n    \n    setValidationErrors(prev => ({\n      ...prev,\n      [fieldName]: error\n    }));\n    \n    return error === null;\n  };\n\n  const handleError = (error, context = '') => {\n    console.error(`Error in ${context}:`, error);\n    \n    let errorMessage = 'An unexpected error occurred. Please try again.';\n    let type = 'general';\n    \n    if (error.message.includes('user rejected')) {\n      errorMessage = 'Transaction was rejected by user';\n      type = 'user_rejection';\n    } else if (error.message.includes('insufficient funds')) {\n      errorMessage = 'Insufficient funds for transaction';\n      type = 'insufficient_funds';\n    } else if (error.message.includes('revert')) {\n      errorMessage = 'Transaction failed. Please check your inputs and try again.';\n      type = 'transaction_revert';\n    } else if (error.message.includes('network')) {\n      errorMessage = 'Network error. Please check your connection and try again.';\n      type = 'network_error';\n    } else if (error.message.includes('timeout')) {\n      errorMessage = 'Request timed out. Please try again.';\n      type = 'timeout';\n    } else if (context === 'identity_creation') {\n      errorMessage = 'Failed to create identity. Please refresh the page and try again.';\n      type = 'identity_error';\n    } else if (context === 'commitment_registration') {\n      errorMessage = 'Failed to register commitment. Please try again.';\n      type = 'commitment_error';\n    } else if (context === 'proof_generation') {\n      errorMessage = 'Failed to generate proof. Please verify your inputs and try again.';\n      type = 'proof_error';\n    }\n    \n    setError(errorMessage);\n    setErrorType(type);\n  };\n\n  const retryOperation = async (operation, context) => {\n    if (retryCount >= maxRetries) {\n      handleError(new Error('Maximum retry attempts reached'), context);\n      return false;\n    }\n    \n    try {\n      setRetryCount(prev => prev + 1);\n      await operation();\n      setRetryCount(0);\n      return true;\n    } catch (error) {\n      if (retryCount < maxRetries - 1) {\n        console.log(`Retrying operation ${context}, attempt ${retryCount + 1}/${maxRetries}`);\n        return retryOperation(operation, context);\n      } else {\n        handleError(error, context);\n        return false;\n      }\n    }\n  };\n\n  const clearError = () => {\n    setError(null);\n    setErrorType(null);\n  };\n\n  const createIdentity = async () => {\n    const operation = async () => {\n      const did = `did:zkkyc:${account}`;\n      const identity = await identityManager.createIdentity(did);\n      \n      setUserIdentity(identity);\n      console.log('Identity created:', identity);\n    };\n    \n    try {\n      setLoading(true);\n      clearError();\n      await retryOperation(operation, 'identity_creation');\n    } catch (error) {\n      handleError(error, 'identity_creation');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const registerCommitment = async () => {\n    if (!userIdentity) {\n      handleError(new Error('Please create an identity first'), 'commitment_registration');\n      return;\n    }\n    \n    const operation = async () => {\n      // Check if commitment already exists\n      const existingCommitment = await kycRegistry.commitments(userIdentity.commitment);\n      if (existingCommitment) {\n        throw new Error('Commitment already registered');\n      }\n      \n      const tx = await kycRegistry.connect(signer).depositCommitment(userIdentity.commitment);\n      await tx.wait();\n      \n      console.log('Commitment registered:', tx.hash);\n      setProofStatus('Commitment registered successfully');\n    };\n    \n    try {\n      setLoading(true);\n      clearError();\n      await retryOperation(operation, 'commitment_registration');\n    } catch (error) {\n      handleError(error, 'commitment_registration');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getValidationSummary = () => {\n    const errors = [];\n    \n    if (!userIdentity) {\n      errors.push('Identity must be created first');\n    }\n    \n    if (!birthDate) {\n      errors.push('Birth date is required');\n    }\n    \n    if (age !== null && age < 18) {\n      errors.push('Must be at least 18 years old to vote');\n    }\n    \n    if (hasVotingAccess) {\n      errors.push('Voting access already granted');\n    }\n    \n    return errors;\n  };\n\n  const generateAndSubmitProof = async () => {\n    if (!userIdentity) {\n      handleError(new Error('Please create an identity first'), 'proof_generation');\n      return;\n    }\n    \n    if (!validateInputs()) {\n      handleError(new Error('Please fix the validation errors above'), 'proof_generation');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      clearError();\n      setProofStatus('Validating age requirements...');\n      \n      // Validate age is at least 18\n      if (age < 18) {\n        handleError(new Error('You must be at least 18 years old to vote'), 'proof_generation');\n        return;\n      }\n      \n      setProofStatus('Generating proof...');\n      \n      // Create a merkle tree with the user's commitment\n      const merkleTree = identityManager.createMerkleTree([userIdentity.commitment]);\n      \n      const currentTime = Math.floor(Date.now() / 1000);\n      const birthTimestamp = Math.floor(new Date(birthDate).getTime() / 1000);\n      \n      // Generate proof inputs using the improved identity manager\n      const proofInputs = await identityManager.generateProofInputs({\n        identity: userIdentity,\n        birthDate: birthTimestamp,\n        currentTime: currentTime,\n        minimumAge: 18, // Minimum age for voting\n        merkleTree: merkleTree\n      });\n      \n      setProofStatus('Proof inputs generated, creating ZK proof...');\n      \n      // Generate ZK proof (will try real ZK proof first, then fallback to mock)\n      const { proof, publicSignals } = await proofGenerator.generateProof(proofInputs);\n      \n      // Check if this is a real proof by looking at the proof structure\n      const isRealProof = proof.pi_a && proof.pi_a.length === 2 && \n                         typeof proof.pi_a[0] === 'string' && \n                         !proof.pi_a[0].startsWith('0x1853034987712246426929201391724714898295156213405955369853072608605563140365');\n      \n      if (isRealProof) {\n        setProofStatus('✅ Real ZK proof generated successfully!');\n      } else {\n        setProofStatus('🔄 Using mock proof (proof server not available)');\n      }\n      \n      setProofStatus('Proof generated, submitting to contract...');\n      \n      // Format proof for contract\n      const proofData = {\n        pA: proof.pi_a.slice(0, 2),\n        pB: [proof.pi_b[0].slice(0, 2), proof.pi_b[1].slice(0, 2)],\n        pC: proof.pi_c.slice(0, 2),\n        publicSignals: publicSignals.slice(0, 4)\n      };\n      \n      console.log('Formatted proof data:', proofData);\n      console.log('Public signals:', publicSignals);\n      \n      // Submit to contract for voting service\n      setProofStatus('Submitting to contract...');\n      \n      try {\n        const tx = await accessController.connect(signer).verifyKYCAndGrantAccess(\n          proofData,\n          'voting'\n        );\n        \n        setProofStatus('Transaction submitted, waiting for confirmation...');\n        await tx.wait();\n        \n        setProofStatus('KYC verification successful! Voting access granted.');\n        setHasVotingAccess(true);\n        console.log('Voting access granted:', tx.hash);\n      } catch (contractError) {\n        console.error('Contract error:', contractError);\n        \n        // Parse contract error for better user feedback\n        if (contractError.message.includes('Invalid proof')) {\n          throw new Error('⚠️ Mock proof validation failed. This is expected since we\\'re using placeholder proof data instead of real ZK proofs. In production, this would use actual zero-knowledge proof generation.');\n        } else if (contractError.message.includes('Service not enabled')) {\n          throw new Error('The voting service is not configured on this contract.');\n        } else if (contractError.message.includes('Nullifier already used')) {\n          throw new Error('This identity has already been used for voting.');\n        } else if (contractError.message.includes('Invalid Merkle root')) {\n          throw new Error('Identity commitment not found in registry. Please register your commitment first.');\n        } else if (contractError.message.includes('Age requirement not met')) {\n          throw new Error('Age requirement not met for voting.');\n        } else {\n          throw new Error(`Contract error: ${contractError.message}`);\n        }\n      }\n      \n    } catch (error) {\n      handleError(error, 'proof_generation');\n      setProofStatus(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n\n  if (!account) {\n    return (\n      <div className=\"zkkyc-wallet\">\n        <h2>ZK-KYC Wallet</h2>\n        <p>Please connect your wallet to continue</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"zkkyc-wallet\">\n      <h2>ZK-KYC Wallet</h2>\n      \n      {error && (\n        <div className={`error-message ${errorType || 'general'}`} role=\"alert\">\n          <div className=\"error-icon\">\n            {errorType === 'user_rejection' && '🚫'}\n            {errorType === 'insufficient_funds' && '💰'}\n            {errorType === 'network_error' && '🌐'}\n            {errorType === 'timeout' && '⏱️'}\n            {(!errorType || errorType === 'general') && '⚠️'}\n          </div>\n          <div className=\"error-content\">\n            <strong>Error:</strong> {error}\n            <button \n              className=\"error-dismiss\" \n              onClick={clearError}\n              aria-label=\"Dismiss error\"\n            >\n              ×\n            </button>\n            {(errorType === 'network_error' || errorType === 'timeout') && retryCount < maxRetries && (\n              <button \n                className=\"retry-button\" \n                onClick={() => {\n                  if (errorType === 'network_error' || errorType === 'timeout') {\n                    window.location.reload();\n                  }\n                }}\n                disabled={loading}\n              >\n                Retry\n              </button>\n            )}\n          </div>\n        </div>\n      )}\n      \n      {proofStatus && (\n        <div className=\"status-message\" style={{ color: 'blue', marginBottom: '10px' }}>\n          {proofStatus}\n        </div>\n      )}\n      \n      {retryCount > 0 && (\n        <div className=\"retry-info\">\n          Retry attempt {retryCount} of {maxRetries}\n        </div>\n      )}\n      \n      <div className=\"account-info\">\n        <p><strong>Account:</strong> {account}</p>\n        <p><strong>Identity:</strong> {userIdentity ? '✅ Created' : '❌ Not created'}</p>\n      </div>\n      \n      {!userIdentity ? (\n        <div className=\"identity-creation\">\n          <h3>Create Identity</h3>\n          <button \n            onClick={createIdentity} \n            disabled={loading}\n            className=\"btn btn-primary\"\n          >\n            {loading && <span className=\"loading-spinner\"></span>}\n            {loading ? 'Creating...' : 'Create Identity'}\n          </button>\n        </div>\n      ) : (\n        <div className=\"identity-management\">\n          <h3>Identity Management</h3>\n          \n          <div className=\"commitment-section\">\n            <h4>Register Commitment</h4>\n            <button \n              onClick={registerCommitment} \n              disabled={loading}\n              className=\"btn btn-secondary\"\n            >\n              {loading && <span className=\"loading-spinner\"></span>}\n              {loading ? 'Registering...' : 'Register Commitment'}\n            </button>\n          </div>\n          \n          <div className=\"proof-section\">\n            <h4>Generate KYC Proof</h4>\n            \n            <div className=\"demo-notice\">\n              <h5>🔬 Real ZK Proof Generation</h5>\n              <p>This application can generate <strong>real zero-knowledge proofs</strong> using:</p>\n              <ul>\n                <li>⚙️ Circom circuits for age verification</li>\n                <li>🔑 snarkjs for proof generation and verification</li>\n                <li>🔐 Groth16 proving system with trusted setup</li>\n                <li>💻 Proof server (localhost:3001) for ZK computations</li>\n              </ul>\n              <p><strong>Status:</strong> Will try real ZK proofs first, fallback to mock if server unavailable.</p>\n            </div>\n            \n            {getValidationSummary().length > 0 && (\n              <div className=\"validation-summary\" role=\"alert\">\n                <h4>Before proceeding, please address the following:</h4>\n                <ul>\n                  {getValidationSummary().map((error, index) => (\n                    <li key={index}>{error}</li>\n                  ))}\n                </ul>\n              </div>\n            )}\n            \n            <div className=\"form-group\">\n              <label htmlFor=\"birthDate\">Birth Date:</label>\n              <input\n                type=\"date\"\n                id=\"birthDate\"\n                value={birthDate}\n                onChange={(e) => {\n                  setBirthDate(e.target.value);\n                  setTouched(prev => ({ ...prev, birthDate: true }));\n                }}\n                onBlur={() => {\n                  setTouched(prev => ({ ...prev, birthDate: true }));\n                  validateField('birthDate', birthDate);\n                }}\n                max={new Date().toISOString().split('T')[0]}\n                min={new Date(new Date().getFullYear() - 120, 0, 1).toISOString().split('T')[0]}\n                className={validationErrors.birthDate && touched.birthDate ? 'error' : ''}\n                required\n                aria-describedby={validationErrors.birthDate && touched.birthDate ? 'birthDate-error' : undefined}\n              />\n              {validationErrors.birthDate && touched.birthDate && (\n                <div id=\"birthDate-error\" className=\"error-text\" role=\"alert\">{validationErrors.birthDate}</div>\n              )}\n            </div>\n            \n            <div className=\"form-group\">\n              <label htmlFor=\"calculatedAge\">Calculated Age:</label>\n              <div className=\"age-display\">\n                {age !== null ? (\n                  <span className={age >= 18 ? 'age-valid' : 'age-invalid'}>\n                    {age} years old {age >= 18 ? '✅ Eligible to vote' : '❌ Must be 18+ to vote'}\n                  </span>\n                ) : (\n                  <span className=\"age-placeholder\">Enter birth date to calculate age</span>\n                )}\n              </div>\n              {validationErrors.age && touched.birthDate && (\n                <div id=\"age-error\" className=\"error-text\" role=\"alert\">{validationErrors.age}</div>\n              )}\n            </div>\n            \n            <div className=\"form-group\">\n              <label>Service:</label>\n              <div className=\"service-info\">\n                <strong>Voting Service</strong>\n                <p>Minimum age requirement: 18 years</p>\n                <p>Current access: {hasVotingAccess ? '✅ Granted' : '❌ Not granted'}</p>\n              </div>\n            </div>\n            \n            <button \n              onClick={generateAndSubmitProof} \n              disabled={loading || !birthDate || age < 18 || hasVotingAccess}\n              className=\"btn btn-primary\"\n              title={age < 18 ? 'You must be 18 or older to vote' : hasVotingAccess ? 'You already have voting access' : 'Generate ZK proof and request voting access'}\n            >\n              {loading && <span className=\"loading-spinner\"></span>}\n              {loading ? 'Processing...' : \n               hasVotingAccess ? 'Voting Access Already Granted' :\n               age < 18 ? 'Must be 18+ to Vote' :\n               'Generate Real ZK Proof'}\n            </button>\n            \n            {!hasVotingAccess && age >= 18 && (\n              <div className=\"demo-explanation\">\n                <p><strong>Real ZK Proof Generation:</strong> This will attempt to generate actual zero-knowledge proofs using your age data and the circom circuit. The proof will be verified both locally and on-chain.</p>\n                <p><strong>To enable real proofs:</strong> Run <code>node scripts/proof-server.js</code> in the project root directory.</p>\n              </div>\n            )}\n          </div>\n          \n          <div className=\"voting-section\">\n            <h4>Voting Service Status</h4>\n            <div className=\"voting-status\">\n              <div className=\"status-item\">\n                <h5>🗳️ Voting Access</h5>\n                <p><strong>Status:</strong> {hasVotingAccess ? '✅ Granted' : '❌ Not granted'}</p>\n                <p><strong>Age Requirement:</strong> 18+ years</p>\n                <p><strong>Your Age:</strong> {age !== null ? `${age} years` : 'Not calculated'}</p>\n                <p><strong>Eligible:</strong> {age >= 18 ? '✅ Yes' : '❌ No'}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      <style jsx>{`\n        .zkkyc-wallet {\n          max-width: 600px;\n          margin: 0 auto;\n          padding: 20px;\n          font-family: Arial, sans-serif;\n        }\n        \n        .form-group {\n          margin-bottom: 15px;\n        }\n        \n        .form-group label {\n          display: block;\n          margin-bottom: 5px;\n          font-weight: bold;\n        }\n        \n        .form-group input, .form-group select {\n          width: 100%;\n          padding: 8px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n        }\n        \n        .btn {\n          padding: 10px 20px;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 16px;\n          margin-right: 10px;\n        }\n        \n        .btn-primary {\n          background-color: #007bff;\n          color: white;\n        }\n        \n        .btn-secondary {\n          background-color: #6c757d;\n          color: white;\n        }\n        \n        .btn:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n        \n        .form-group input.error {\n          border-color: #dc3545;\n          background-color: #f8d7da;\n        }\n        \n        .error-text {\n          color: #dc3545;\n          font-size: 14px;\n          margin-top: 5px;\n          display: flex;\n          align-items: center;\n          gap: 5px;\n        }\n        \n        .error-text::before {\n          content: '⚠️';\n          font-size: 12px;\n        }\n        \n        .error-message {\n          display: flex;\n          align-items: flex-start;\n          gap: 10px;\n          padding: 12px;\n          border-radius: 6px;\n          margin-bottom: 15px;\n          border: 1px solid;\n          font-size: 14px;\n        }\n        \n        .error-message.general {\n          background-color: #f8d7da;\n          color: #721c24;\n          border-color: #f5c6cb;\n        }\n        \n        .error-message.user_rejection {\n          background-color: #fff3cd;\n          color: #856404;\n          border-color: #ffeaa7;\n        }\n        \n        .error-message.insufficient_funds {\n          background-color: #f8d7da;\n          color: #721c24;\n          border-color: #f5c6cb;\n        }\n        \n        .error-message.network_error {\n          background-color: #d1ecf1;\n          color: #0c5460;\n          border-color: #bee5eb;\n        }\n        \n        .error-message.timeout {\n          background-color: #fff3cd;\n          color: #856404;\n          border-color: #ffeaa7;\n        }\n        \n        .error-icon {\n          font-size: 18px;\n          flex-shrink: 0;\n        }\n        \n        .error-content {\n          flex: 1;\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n        }\n        \n        .error-dismiss {\n          background: none;\n          border: none;\n          font-size: 18px;\n          cursor: pointer;\n          padding: 0;\n          margin-left: 10px;\n          opacity: 0.7;\n          transition: opacity 0.2s;\n        }\n        \n        .error-dismiss:hover {\n          opacity: 1;\n        }\n        \n        .age-display {\n          padding: 10px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          background-color: #f8f9fa;\n          font-weight: bold;\n        }\n        \n        .age-valid {\n          color: #28a745;\n        }\n        \n        .age-invalid {\n          color: #dc3545;\n        }\n        \n        .age-placeholder {\n          color: #6c757d;\n          font-style: italic;\n        }\n        \n        .service-info {\n          padding: 15px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          background-color: #f8f9fa;\n        }\n        \n        .service-info p {\n          margin: 5px 0;\n        }\n        \n        .voting-status {\n          display: flex;\n          flex-direction: column;\n          gap: 15px;\n        }\n        \n        .status-item {\n          border: 1px solid #ddd;\n          padding: 15px;\n          border-radius: 4px;\n          background-color: #f8f9fa;\n        }\n        \n        .status-item h5 {\n          margin-top: 0;\n          color: #007bff;\n        }\n        \n        .loading-spinner {\n          display: inline-block;\n          width: 16px;\n          height: 16px;\n          border: 2px solid #f3f3f3;\n          border-top: 2px solid #007bff;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin-right: 8px;\n        }\n        \n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        \n        .validation-summary {\n          background-color: #f8f9fa;\n          border: 1px solid #dee2e6;\n          border-radius: 6px;\n          padding: 15px;\n          margin-bottom: 20px;\n        }\n        \n        .validation-summary h4 {\n          margin-top: 0;\n          color: #495057;\n        }\n        \n        .validation-summary ul {\n          margin: 10px 0 0 0;\n          padding-left: 20px;\n        }\n        \n        .validation-summary li {\n          color: #dc3545;\n          margin-bottom: 5px;\n        }\n        \n        .success-message {\n          background-color: #d4edda;\n          color: #155724;\n          border: 1px solid #c3e6cb;\n          border-radius: 6px;\n          padding: 12px;\n          margin-bottom: 15px;\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        \n        .success-message::before {\n          content: '✓';\n          font-size: 16px;\n          font-weight: bold;\n        }\n        \n        .demo-notice {\n          background-color: #e7f3ff;\n          border: 1px solid #b8daff;\n          border-radius: 8px;\n          padding: 15px;\n          margin-bottom: 20px;\n        }\n        \n        .demo-notice h5 {\n          margin: 0 0 10px 0;\n          color: #004085;\n          font-size: 1rem;\n        }\n        \n        .demo-notice p {\n          margin: 0 0 10px 0;\n          color: #004085;\n          font-size: 0.9rem;\n        }\n        \n        .demo-notice ul {\n          margin: 10px 0;\n          padding-left: 20px;\n          color: #004085;\n        }\n        \n        .demo-notice li {\n          margin-bottom: 5px;\n          font-size: 0.9rem;\n        }\n        \n        .retry-info {\n          background-color: #fff3cd;\n          border: 1px solid #ffeaa7;\n          border-radius: 6px;\n          padding: 10px;\n          margin-top: 10px;\n          font-size: 14px;\n          color: #856404;\n        }\n        \n        .retry-button {\n          background-color: #28a745;\n          color: white;\n          border: none;\n          padding: 6px 12px;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 14px;\n          margin-left: 10px;\n        }\n        \n        .retry-button:hover {\n          background-color: #218838;\n        }\n        \n        .retry-button:disabled {\n          background-color: #6c757d;\n          cursor: not-allowed;\n        }\n        \n        .demo-explanation {\n          background-color: #f8f9fa;\n          border: 1px solid #dee2e6;\n          border-radius: 4px;\n          padding: 10px;\n          margin-top: 10px;\n          font-size: 0.9rem;\n        }\n        \n        .demo-explanation p {\n          margin: 0;\n          color: #6c757d;\n        }\n      `}</style>\n    </div>\n  );\n}\n\nexport default ZKKYCWallet;","import React, { useContext, useState } from 'react';\nimport { Web3Context } from '../context/Web3Context';\n\nfunction WalletConnection() {\n  const { connectWallet, loading, error, switchToSepolia, addSepoliaNetwork } = useContext(Web3Context);\n  const [isConnecting, setIsConnecting] = useState(false);\n\n  const handleConnect = async () => {\n    try {\n      setIsConnecting(true);\n      await connectWallet();\n      \n      // Check if we need to switch to Sepolia\n      const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n      const sepoliaChainId = '0xaa36a7'; // 11155111 in hex\n      \n      if (chainId !== sepoliaChainId) {\n        await switchToSepolia();\n      }\n    } catch (error) {\n      console.error('Error connecting wallet:', error);\n    } finally {\n      setIsConnecting(false);\n    }\n  };\n\n  const handleAddSepolia = async () => {\n    try {\n      await addSepoliaNetwork();\n    } catch (error) {\n      console.error('Error adding Sepolia network:', error);\n    }\n  };\n\n  return (\n    <div className=\"wallet-connection\">\n      <div className=\"connection-card\">\n        <div className=\"card-header\">\n          <h2>Connect Your Wallet</h2>\n          <p>Connect your MetaMask wallet to access the ZK-KYC system</p>\n        </div>\n\n        {error && (\n          <div className=\"error-message\">\n            <strong>Connection Error:</strong> {error}\n          </div>\n        )}\n\n        <div className=\"connection-steps\">\n          <div className=\"step\">\n            <div className=\"step-number\">1</div>\n            <div className=\"step-content\">\n              <h3>Install MetaMask</h3>\n              <p>Make sure you have MetaMask installed in your browser</p>\n              {!window.ethereum && (\n                <a \n                  href=\"https://metamask.io/download/\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"btn btn-outline\"\n                >\n                  Install MetaMask\n                </a>\n              )}\n            </div>\n          </div>\n\n          <div className=\"step\">\n            <div className=\"step-number\">2</div>\n            <div className=\"step-content\">\n              <h3>Connect to Sepolia</h3>\n              <p>This application requires the Sepolia test network</p>\n              <button \n                onClick={handleAddSepolia}\n                className=\"btn btn-outline\"\n                disabled={!window.ethereum}\n              >\n                Add Sepolia Network\n              </button>\n            </div>\n          </div>\n\n          <div className=\"step\">\n            <div className=\"step-number\">3</div>\n            <div className=\"step-content\">\n              <h3>Connect Wallet</h3>\n              <p>Click the button below to connect your MetaMask wallet</p>\n              <button \n                onClick={handleConnect}\n                disabled={!window.ethereum || loading || isConnecting}\n                className=\"btn btn-primary\"\n              >\n                {isConnecting ? (\n                  <span className=\"loading-spinner\">\n                    <span className=\"spinner\"></span>\n                    Connecting...\n                  </span>\n                ) : (\n                  'Connect MetaMask'\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"features-info\">\n          <h3>What you can do with ZK-KYC:</h3>\n          <ul>\n            <li>Create a privacy-preserving digital identity</li>\n            <li>Generate zero-knowledge proofs for age verification</li>\n            <li>Access services without revealing personal information</li>\n            <li>Maintain full control over your data</li>\n          </ul>\n        </div>\n      </div>\n\n      <style jsx>{`\n        .wallet-connection {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          min-height: 60vh;\n          padding: 2rem 0;\n        }\n\n        .connection-card {\n          background: white;\n          border-radius: 12px;\n          box-shadow: 0 4px 20px rgba(0,0,0,0.1);\n          padding: 2rem;\n          max-width: 600px;\n          width: 100%;\n        }\n\n        .card-header {\n          text-align: center;\n          margin-bottom: 2rem;\n        }\n\n        .card-header h2 {\n          color: #333;\n          margin-bottom: 0.5rem;\n          font-size: 1.8rem;\n        }\n\n        .card-header p {\n          color: #666;\n          font-size: 1rem;\n        }\n\n        .error-message {\n          background-color: #f8d7da;\n          color: #721c24;\n          padding: 1rem;\n          border-radius: 8px;\n          margin-bottom: 1.5rem;\n          border: 1px solid #f5c6cb;\n        }\n\n        .connection-steps {\n          margin-bottom: 2rem;\n        }\n\n        .step {\n          display: flex;\n          align-items: flex-start;\n          gap: 1rem;\n          margin-bottom: 1.5rem;\n          padding: 1rem;\n          background-color: #f8f9fa;\n          border-radius: 8px;\n        }\n\n        .step-number {\n          background-color: #007bff;\n          color: white;\n          width: 32px;\n          height: 32px;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: bold;\n          flex-shrink: 0;\n        }\n\n        .step-content {\n          flex: 1;\n        }\n\n        .step-content h3 {\n          margin: 0 0 0.5rem 0;\n          color: #333;\n          font-size: 1.1rem;\n        }\n\n        .step-content p {\n          margin: 0 0 0.5rem 0;\n          color: #666;\n          font-size: 0.9rem;\n        }\n\n        .btn {\n          padding: 0.75rem 1.5rem;\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 1rem;\n          font-weight: 500;\n          transition: all 0.2s;\n          text-decoration: none;\n          display: inline-block;\n          text-align: center;\n        }\n\n        .btn-primary {\n          background-color: #007bff;\n          color: white;\n        }\n\n        .btn-primary:hover:not(:disabled) {\n          background-color: #0056b3;\n        }\n\n        .btn-outline {\n          background-color: transparent;\n          color: #007bff;\n          border: 2px solid #007bff;\n        }\n\n        .btn-outline:hover:not(:disabled) {\n          background-color: #007bff;\n          color: white;\n        }\n\n        .btn:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        .loading-spinner {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n        }\n\n        .spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid transparent;\n          border-top: 2px solid currentColor;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        .features-info {\n          background-color: #e3f2fd;\n          padding: 1.5rem;\n          border-radius: 8px;\n          border-left: 4px solid #2196f3;\n        }\n\n        .features-info h3 {\n          margin: 0 0 1rem 0;\n          color: #1565c0;\n          font-size: 1.1rem;\n        }\n\n        .features-info ul {\n          margin: 0;\n          padding-left: 1.5rem;\n        }\n\n        .features-info li {\n          margin-bottom: 0.5rem;\n          color: #333;\n        }\n\n        @media (max-width: 768px) {\n          .connection-card {\n            margin: 1rem;\n            padding: 1.5rem;\n          }\n\n          .step {\n            flex-direction: column;\n            text-align: center;\n          }\n\n          .step-number {\n            align-self: center;\n          }\n        }\n      `}</style>\n    </div>\n  );\n}\n\nexport default WalletConnection;","import React, { useContext } from 'react';\nimport { Web3Context } from '../context/Web3Context';\n\nfunction NetworkStatus() {\n  const { account, network, isConnected, isCorrectNetwork, switchToSepolia, SEPOLIA_CHAIN_ID } = useContext(Web3Context);\n\n  const networkName = network?.name || 'Unknown';\n  const shortAccount = account ? `${account.slice(0, 6)}...${account.slice(-4)}` : '';\n\n  const handleSwitchNetwork = async () => {\n    await switchToSepolia();\n  };\n\n  if (!isConnected) {\n    return null;\n  }\n\n  return (\n    <div className=\"network-status\">\n      <div className=\"status-card\">\n        <div className=\"connection-info\">\n          <div className=\"connection-row\">\n            <span className=\"label\">Wallet:</span>\n            <span className=\"value account-address\">{shortAccount}</span>\n          </div>\n          \n          <div className=\"connection-row\">\n            <span className=\"label\">Network:</span>\n            <div className=\"network-info\">\n              <span className={`status-indicator ${isCorrectNetwork ? 'correct' : 'incorrect'}`}></span>\n              <span className=\"value\">{networkName} {network?.chainId ? `(${network.chainId})` : ''}</span>\n              {!isCorrectNetwork && (\n                <button \n                  onClick={handleSwitchNetwork}\n                  className=\"switch-network-btn\"\n                >\n                  Switch to Sepolia\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {!isCorrectNetwork && (\n          <div className=\"network-warning\">\n            <strong>Warning:</strong> Please switch to Sepolia testnet for full functionality\n          </div>\n        )}\n      </div>\n\n      <style jsx>{`\n        .network-status {\n          margin-bottom: 2rem;\n        }\n\n        .status-card {\n          background: white;\n          border-radius: 8px;\n          padding: 1rem;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n          border: 1px solid #e9ecef;\n        }\n\n        .connection-info {\n          display: flex;\n          flex-direction: column;\n          gap: 0.75rem;\n        }\n\n        .connection-row {\n          display: flex;\n          align-items: center;\n          gap: 1rem;\n        }\n\n        .label {\n          font-weight: 600;\n          color: #495057;\n          min-width: 80px;\n        }\n\n        .value {\n          color: #212529;\n          font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n          font-size: 0.9rem;\n        }\n\n        .account-address {\n          background-color: #f8f9fa;\n          padding: 0.25rem 0.5rem;\n          border-radius: 4px;\n          border: 1px solid #dee2e6;\n        }\n\n        .network-info {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n        }\n\n        .status-indicator {\n          width: 12px;\n          height: 12px;\n          border-radius: 50%;\n          display: inline-block;\n        }\n\n        .status-indicator.correct {\n          background-color: #28a745;\n          box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.25);\n        }\n\n        .status-indicator.incorrect {\n          background-color: #dc3545;\n          box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.25);\n          animation: pulse 2s infinite;\n        }\n\n        @keyframes pulse {\n          0% {\n            box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7);\n          }\n          70% {\n            box-shadow: 0 0 0 4px rgba(220, 53, 69, 0);\n          }\n          100% {\n            box-shadow: 0 0 0 0 rgba(220, 53, 69, 0);\n          }\n        }\n\n        .switch-network-btn {\n          background-color: #ffc107;\n          color: #212529;\n          border: none;\n          padding: 0.25rem 0.5rem;\n          border-radius: 4px;\n          font-size: 0.8rem;\n          cursor: pointer;\n          transition: background-color 0.2s;\n        }\n\n        .switch-network-btn:hover {\n          background-color: #ffca2c;\n        }\n\n        .network-warning {\n          background-color: #fff3cd;\n          color: #856404;\n          padding: 0.75rem;\n          border-radius: 4px;\n          margin-top: 1rem;\n          border: 1px solid #ffeaa7;\n          font-size: 0.9rem;\n        }\n\n        @media (max-width: 768px) {\n          .connection-row {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 0.5rem;\n          }\n\n          .label {\n            min-width: auto;\n          }\n\n          .network-info {\n            flex-wrap: wrap;\n          }\n        }\n      `}</style>\n    </div>\n  );\n}\n\nexport default NetworkStatus;","import React, { useState, useEffect, useContext } from 'react';\nimport { Web3Provider, Web3Context } from './context/Web3Context';\nimport { ZKKYCProvider } from './context/ZKKYCContext';\nimport ZKKYCWallet from './components/ZKKYCWallet';\nimport WalletConnection from './components/WalletConnection';\nimport NetworkStatus from './components/NetworkStatus';\n\nfunction AppContent() {\n  const { account, network, isConnected, isCorrectNetwork, error: web3Error, switchAccount, switchToSepolia } = useContext(Web3Context);\n  const [appError, setAppError] = useState(null);\n\n  useEffect(() => {\n    // Check if we're on the correct network\n    if (network && !isCorrectNetwork) {\n      setAppError('Please switch to Sepolia testnet to use this application');\n    } else {\n      setAppError(null);\n    }\n  }, [network, isCorrectNetwork]);\n\n  return (\n    <div className=\"app\">\n      <header>\n        <div className=\"container\">\n          <h1>ZK-KYC System</h1>\n          <p>Privacy-preserving KYC verification using zero-knowledge proofs</p>\n        </div>\n      </header>\n\n      <main className=\"container\">\n        {/* Network Status */}\n        <NetworkStatus />\n\n        {/* Error Display */}\n        {(appError || web3Error) && (\n          <div className=\"error-banner\">\n            {appError || web3Error}\n            {appError && network && !isCorrectNetwork && (\n              <button \n                onClick={switchToSepolia} \n                className=\"switch-network-btn\"\n                style={{ marginLeft: '10px' }}\n              >\n                Switch to Sepolia\n              </button>\n            )}\n          </div>\n        )}\n        \n        {/* Wallet Controls */}\n        {isConnected && (\n          <div className=\"wallet-controls\">\n            <div className=\"wallet-info\">\n              <span>Connected: {account?.slice(0, 6)}...{account?.slice(-4)}</span>\n              <span className={`network-status ${isCorrectNetwork ? 'correct' : 'incorrect'}`}>\n                {network?.name || 'Unknown Network'} {isCorrectNetwork ? '✅' : '❌'}\n              </span>\n            </div>\n            <button \n              onClick={switchAccount} \n              className=\"btn btn-outline\"\n            >\n              Switch Account\n            </button>\n          </div>\n        )}\n\n        {/* Main Content */}\n        {!isConnected ? (\n          <WalletConnection />\n        ) : !isCorrectNetwork ? (\n          <div className=\"network-warning\">\n            <h3>⚠️ Wrong Network</h3>\n            <p>Please switch to Sepolia testnet to use this application.</p>\n            <button onClick={switchToSepolia} className=\"btn btn-primary\">\n              Switch to Sepolia\n            </button>\n          </div>\n        ) : (\n          <ZKKYCProvider>\n            <ZKKYCWallet />\n          </ZKKYCProvider>\n        )}\n\n        {/* Footer */}\n        <footer>\n          <div className=\"footer-content\">\n            <p>&copy; 2024 ZK-KYC System. Privacy-first identity verification.</p>\n            <div className=\"footer-links\">\n              <a href=\"https://sepolia.etherscan.io/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                View on Sepolia Etherscan\n              </a>\n              <span>•</span>\n              <a href=\"https://github.com\" target=\"_blank\" rel=\"noopener noreferrer\">\n                GitHub\n              </a>\n            </div>\n          </div>\n        </footer>\n      </main>\n\n      <style jsx>{`\n        .app {\n          min-height: 100vh;\n          display: flex;\n          flex-direction: column;\n        }\n\n        header {\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          color: white;\n          padding: 2rem 0;\n          text-align: center;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        }\n\n        header h1 {\n          font-size: 2.5rem;\n          margin-bottom: 0.5rem;\n          font-weight: 700;\n        }\n\n        header p {\n          font-size: 1.1rem;\n          opacity: 0.9;\n          max-width: 600px;\n          margin: 0 auto;\n        }\n\n        .container {\n          max-width: 1200px;\n          margin: 0 auto;\n          padding: 0 1rem;\n        }\n\n        main {\n          flex: 1;\n          padding: 2rem 1rem;\n        }\n\n        .error-banner {\n          background-color: #f8d7da;\n          color: #721c24;\n          padding: 1rem;\n          border-radius: 8px;\n          margin-bottom: 2rem;\n          border: 1px solid #f5c6cb;\n          text-align: center;\n          font-weight: 500;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 10px;\n        }\n        \n        .switch-network-btn {\n          background-color: #007bff;\n          color: white;\n          border: none;\n          padding: 6px 12px;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 14px;\n          transition: background-color 0.2s;\n        }\n        \n        .switch-network-btn:hover {\n          background-color: #0056b3;\n        }\n        \n        .wallet-controls {\n          background-color: #f8f9fa;\n          border: 1px solid #dee2e6;\n          border-radius: 8px;\n          padding: 1rem;\n          margin-bottom: 2rem;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          flex-wrap: wrap;\n          gap: 1rem;\n        }\n        \n        .wallet-info {\n          display: flex;\n          flex-direction: column;\n          gap: 0.5rem;\n        }\n        \n        .network-status {\n          font-size: 0.9rem;\n          padding: 2px 8px;\n          border-radius: 12px;\n          font-weight: 500;\n        }\n        \n        .network-status.correct {\n          background-color: #d4edda;\n          color: #155724;\n        }\n        \n        .network-status.incorrect {\n          background-color: #f8d7da;\n          color: #721c24;\n        }\n        \n        .btn {\n          padding: 8px 16px;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 14px;\n          transition: all 0.2s;\n        }\n        \n        .btn-outline {\n          background-color: transparent;\n          color: #007bff;\n          border: 1px solid #007bff;\n        }\n        \n        .btn-outline:hover {\n          background-color: #007bff;\n          color: white;\n        }\n\n        footer {\n          background-color: #f8f9fa;\n          border-top: 1px solid #e9ecef;\n          padding: 2rem 0;\n          margin-top: 3rem;\n        }\n\n        .footer-content {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          flex-wrap: wrap;\n          gap: 1rem;\n        }\n\n        .footer-links {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n        }\n\n        .footer-links a {\n          color: #007bff;\n          text-decoration: none;\n          transition: color 0.2s;\n        }\n\n        .footer-links a:hover {\n          color: #0056b3;\n          text-decoration: underline;\n        }\n\n        @media (max-width: 768px) {\n          header h1 {\n            font-size: 2rem;\n          }\n\n          header p {\n            font-size: 1rem;\n          }\n\n          .footer-content {\n            flex-direction: column;\n            text-align: center;\n          }\n\n          main {\n            padding: 1rem;\n          }\n          \n          .wallet-controls {\n            flex-direction: column;\n            text-align: center;\n          }\n        }\n        \n        .network-warning {\n          background-color: #fff3cd;\n          border: 1px solid #ffeaa7;\n          border-radius: 8px;\n          padding: 2rem;\n          text-align: center;\n          margin: 2rem 0;\n        }\n        \n        .network-warning h3 {\n          color: #856404;\n          margin-bottom: 1rem;\n        }\n        \n        .network-warning p {\n          color: #856404;\n          margin-bottom: 1.5rem;\n        }\n        \n        .btn-primary {\n          background-color: #007bff;\n          color: white;\n        }\n        \n        .btn-primary:hover {\n          background-color: #0056b3;\n        }\n      `}</style>\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <Web3Provider>\n      <AppContent />\n    </Web3Provider>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\n// Global styles\nconst globalStyles = `\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n\n  body {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    background-color: #f8f9fa;\n    color: #212529;\n    line-height: 1.6;\n  }\n\n  #root {\n    min-height: 100vh;\n  }\n\n  button {\n    font-family: inherit;\n  }\n\n  a {\n    color: #007bff;\n    text-decoration: none;\n  }\n\n  a:hover {\n    text-decoration: underline;\n  }\n\n  .container {\n    max-width: 1200px;\n    margin: 0 auto;\n    padding: 0 1rem;\n  }\n`;\n\n// Inject global styles\nconst styleSheet = document.createElement('style');\nstyleSheet.textContent = globalStyles;\ndocument.head.appendChild(styleSheet);\n\n// Error boundary component\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error('Error caught by boundary:', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div style={{\n          padding: '2rem',\n          textAlign: 'center',\n          backgroundColor: '#f8d7da',\n          color: '#721c24',\n          borderRadius: '8px',\n          margin: '2rem auto',\n          maxWidth: '600px',\n          border: '1px solid #f5c6cb'\n        }}>\n          <h2>Something went wrong</h2>\n          <p>The application encountered an error. Please refresh the page and try again.</p>\n          {this.state.error && (\n            <details style={{ marginTop: '1rem', textAlign: 'left' }}>\n              <summary style={{ cursor: 'pointer' }}>Error Details</summary>\n              <pre style={{ \n                backgroundColor: '#f1f1f1', \n                padding: '1rem', \n                borderRadius: '4px',\n                fontSize: '0.8rem',\n                overflow: 'auto'\n              }}>\n                {this.state.error.toString()}\n              </pre>\n            </details>\n          )}\n          <button\n            onClick={() => window.location.reload()}\n            style={{\n              marginTop: '1rem',\n              padding: '0.5rem 1rem',\n              backgroundColor: '#dc3545',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer'\n            }}\n          >\n            Reload Page\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// Check for required browser features\nconst checkBrowserSupport = () => {\n  const unsupportedFeatures = [];\n\n  if (!window.ethereum) {\n    unsupportedFeatures.push('MetaMask or Web3 provider');\n  }\n\n  if (!window.crypto || !window.crypto.subtle) {\n    unsupportedFeatures.push('Web Crypto API');\n  }\n\n  if (!window.BigInt) {\n    unsupportedFeatures.push('BigInt support');\n  }\n\n  return unsupportedFeatures;\n};\n\n// Main app initialization\nconst initializeApp = () => {\n  const root = ReactDOM.createRoot(document.getElementById('root'));\n  \n  const unsupportedFeatures = checkBrowserSupport();\n  \n  if (unsupportedFeatures.length > 0) {\n    root.render(\n      <div style={{\n        padding: '2rem',\n        textAlign: 'center',\n        backgroundColor: '#fff3cd',\n        color: '#856404',\n        borderRadius: '8px',\n        margin: '2rem auto',\n        maxWidth: '600px',\n        border: '1px solid #ffeaa7'\n      }}>\n        <h2>Browser Not Supported</h2>\n        <p>Your browser doesn't support the following required features:</p>\n        <ul style={{ listStyle: 'none', padding: 0 }}>\n          {unsupportedFeatures.map((feature, index) => (\n            <li key={index} style={{ margin: '0.5rem 0' }}>• {feature}</li>\n          ))}\n        </ul>\n        <p style={{ marginTop: '1rem' }}>\n          Please use a modern browser like Chrome, Firefox, or Safari with MetaMask installed.\n        </p>\n      </div>\n    );\n    return;\n  }\n\n  root.render(\n    <React.StrictMode>\n      <ErrorBoundary>\n        <App />\n      </ErrorBoundary>\n    </React.StrictMode>\n  );\n};\n\n// Handle document ready\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initializeApp);\n} else {\n  initializeApp();\n}\n\n// Global error handling for unhandled promise rejections\nwindow.addEventListener('unhandledrejection', (event) => {\n  console.error('Unhandled promise rejection:', event.reason);\n  // Optionally show user-friendly error message\n});\n\n// Performance monitoring (development only)\nif (process.env.NODE_ENV === 'development') {\n  const startTime = performance.now();\n  \n  window.addEventListener('load', () => {\n    const loadTime = performance.now() - startTime;\n    console.log(`App loaded in ${loadTime.toFixed(2)}ms`);\n  });\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkzkkyc_frontend\"] = self[\"webpackChunkzkkyc_frontend\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [96], function() { return __webpack_require__(4834); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","Web3Context","createContext","Web3Provider","children","account","setAccount","useState","provider","setProvider","signer","setSigner","network","setNetwork","loading","setLoading","error","setError","isCorrectNetwork","setIsCorrectNetwork","SEPOLIA_CHAIN_ID","SEPOLIA_CHAIN_HEX","useEffect","checkWalletConnection","setupEventListeners","removeEventListeners","window","ethereum","on","handleAccountsChanged","handleChainChanged","removeListener","accounts","length","disconnectWallet","getSigner","chainId","chainIdDecimal","parseInt","location","reload","checkNetworkCompatibility","networkInfo","isCorrect","async","ethers","listAccounts","getNetwork","console","connectWallet","Error","request","method","message","addSepoliaNetwork","params","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","blockExplorerUrls","value","switchAccount","eth_accounts","switchToSepolia","setTimeout","code","isConnected","_jsx","Provider","PROOF_SERVER_URL","constructor","this","wasmPath","zkeyPath","verificationKeyPath","merkleTreeHeight","generateProof","inputs","log","response","fetch","headers","body","JSON","stringify","ok","result","json","success","proof","publicSignals","warn","status","serverError","generateMockProof","verifyProof","isValid","prepareCircuitInputs","nullifier","secret","did","birthDate","currentTime","minimumAge","merkleRoot","nullifierHash","merkleProof","birthTimestamp","Math","floor","Date","getTime","pathElements","Array","fill","pathIndices","i","min","toBigInt","map","x","toString","root","formatProofForContract","pi_a","pi_b","pi_c","startsWith","BigInt","generateCommitment","encode","generateNullifierHash","createMerkleTree","leaves","getProof","leafIndex","zkProofService","ZKProofService","createIdentity","generateRandomBigInt","didBigInt","stringToBigInt","commitment","identity","createdAt","now","generateProofInputs","merkleTree","proofInputs","generateZKProof","bytes","str","hash","commitments","loadIdentity","stored","localStorage","getItem","parse","saveIdentity","setItem","KYCRegistryABI","AccessControllerABI","ZKKYCContext","ZKKYCProvider","useContext","userIdentity","setUserIdentity","proofGenerator","setProofGenerator","identityManager","setIdentityManager","kycRegistry","setKycRegistry","accessController","setAccessController","contractAddresses","initializeContracts","initializeUtils","kycRegistryContract","accessControllerContract","IdentityManager","proofGen","identityMgr","registerCommitment","tx","connect","depositCommitment","wait","verifyAndGrantAccess","proofData","serviceName","serviceConfig","getServiceConfig","enabled","verifyKYCAndGrantAccess","includes","checkAccess","user","hasAccess","config","toNumber","validityPeriod","clearError","isInitialized","errorType","setErrorType","setBirthDate","proofStatus","setProofStatus","age","setAge","validationErrors","setValidationErrors","touched","setTouched","hasVotingAccess","setHasVotingAccess","retryCount","setRetryCount","maxRetries","loadUserIdentity","checkVotingAccess","calculateAge","today","birth","isNaN","validateField","calculatedAge","getFullYear","monthDiff","getMonth","getDate","validateBirthDate","date","minDate","setFullYear","validateAge","fieldName","prev","handleError","context","errorMessage","type","retryOperation","operation","getValidationSummary","errors","push","_jsxs","className","role","onClick","disabled","style","color","marginBottom","index","htmlFor","id","onChange","e","target","onBlur","max","toISOString","split","required","undefined","validateInputs","birthDateError","ageError","Object","keys","isRealProof","pA","slice","pB","pC","contractError","title","_JSXStyle","isConnecting","setIsConnecting","href","rel","networkName","shortAccount","AppContent","web3Error","appError","setAppError","NetworkStatus","marginLeft","ZKKYCWallet","WalletConnection","styleSheet","document","createElement","textContent","head","appendChild","ErrorBoundary","React","props","super","state","hasError","getDerivedStateFromError","componentDidCatch","errorInfo","render","padding","textAlign","backgroundColor","borderRadius","margin","maxWidth","border","marginTop","cursor","fontSize","overflow","initializeApp","ReactDOM","getElementById","unsupportedFeatures","checkBrowserSupport","crypto","subtle","listStyle","feature","App","readyState","addEventListener","event","reason","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","m","amdO","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}